"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2619],{22619:function(e,t,l){l.d(t,{Z:function(){return O}});var a=l(52322),i=l(84832),n=l(72779),s=l.n(n),o=l(2784),c=l(25237),r=l.n(c),u=l(15646),d=l(53654),m=l(73471),h=l(64018),p=l(43789),x=l(33321),g=l(595),v=l(9647),w=l(30412),b=l(83271),_=l(61121),k=l.n(_),C=l(96810);let f=r()(()=>l.e(5583).then(l.bind(l,5583)),{loadableGenerated:{webpack:()=>[5583]}});function y(e){let{setUserInitialEmail:t}=e,l=(0,o.useRef)(null),{setModeStates:n,setModalStage:c,route:r}=(0,o.useContext)(i.N),[_,y]=(0,o.useState)(!1),{sendClickEvent:j}=(0,o.useContext)(u.fC),{hasWhatsAppConsent:N,updateWhatsAppConsent:Z}=(0,v.Z)(),[E,F]=(0,o.useState)({email:"",password:""}),[P,R]=(0,o.useState)(""),[M,S]=(0,o.useState)(!1),[T,B]=(0,o.useState)(!1),{sendUserEmailDetails:I,checkIsNewUser:L}=(0,g.Z)(),A=(0,o.useCallback)((e,t)=>{var l,a,i,n;"password"===e&&(null===(l=t.target)||void 0===l?void 0:l.value)?F({...E,[e]:null===(i=t.target)||void 0===i?void 0:i.value}):(null===(a=t.target)||void 0===a?void 0:a.value.trim())!==""||E[e]?F({...E,[e]:(null===(n=t.target)||void 0===n?void 0:n.value)||""}):F({...E,[e]:""})},[E]),O=(0,o.useCallback)((e,t,l,a,i)=>{j({type:e,action:t,text:l,url:"",section:a,param:i})},[j]),V=(0,o.useCallback)(async e=>{var a,i,n,s,o;try{let n=_?null===(a=l.current)||void 0===a?void 0:a.getValue():l.current;if(n){if("email"===e){if((0,m.Le)(E.email)){let e=await L("email",E.email,n,_);e.new_user?(t(E.email),c(1),j({type:"button_click",action:"verify_captcha",text:"",section:"signup_email_detail",url:""})):S(!0),_&&(null===(i=l.current)||void 0===i||i.reset(),B(!1))}else R(p.Si)}else{let e={email:E.email,password:E.password},{success:t}=await I(e,n,_);t&&(window.location.href=r||window.location.href)}}}catch(a){let e=null==a?void 0:null===(n=a.response)||void 0===n?void 0:n.status,t=d.Al[e];if(403===e){let{signature:e}=null==a?void 0:a.responseJson;window.location.href="".concat(window.location.origin,"/users/session-management/?signature=").concat(e,"&source_path=").concat(null==a?void 0:null===(s=a.responseJson)||void 0===s?void 0:s.source_path)}422===e&&(y(!0),l.current=null,B(!1)),R(t||d.I),_&&(B(!1),null===(o=l.current)||void 0===o||o.reset())}return null},[_,E.email,E.password,L,t,c,I,r,j]),z=(0,o.useCallback)(()=>{var e;R(""),S(!1),_&&(null===(e=l.current)||void 0===e||e.reset()),B(!1),O("button_click","click","Edit","login_email_details")},[_,O]);return(0,a.jsx)(a.Fragment,{children:M?(0,a.jsxs)("div",{className:k().loginEmailForm,children:[(0,a.jsxs)("div",{className:s()(k().email_text,"m-b-xxs"),children:["Enter your password for "," ",(0,a.jsx)("span",{className:"bold",children:E.email}),(0,a.jsx)(x.Z,{onClick:z,className:s()(k().editBtn),children:(0,a.jsxs)("span",{children:[(0,a.jsx)(h.T,{className:"m-l-xxs"}),"Edit"]})})]}),(0,a.jsx)(w.Z,{label:"Password",placeholderText:"Password",value:E.password,onChange:e=>A("password",e),type:"password",errorMsg:P,inputClassName:k().border_style,onClick:()=>R(""),inputContainerClassName:s()("m-v-xxs",k().phone_input)}),(0,a.jsx)("div",{className:s()(k().highlightedMsg,"p-v-5 full-width row justify-c"),children:(0,a.jsx)("a",{href:"/users/password/new/",onClick:()=>O("cta_click","click","Forgot Password","login_email"),children:"Forgot Password?"})}),(0,a.jsx)(b.Z,{action:"login_email",recaptchaRef:l,className:"row flex-c full-width",setEnableRecaptcha:B,showFallbackRecaptcha:_,onChange:()=>{j({type:"button_click",action:"verify_captcha",text:"",url:"",section:"login_email"})}}),(0,a.jsx)("button",{type:"button",className:k().submitFormBtn,onClick:()=>{O("cta_click","click","Continue","login_email",{whatsapp_consent:"0"!==N}),Z(),V(M?"password":"email")},disabled:!T||M&&!E.password||!M&&!E.email,children:(0,a.jsx)("span",{children:" Continue "})})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:k().loginEmailForm,children:[(0,a.jsx)(w.Z,{label:"Email",placeholderText:"Email",value:E.email,errorMsg:P,onClick:()=>R(""),onChange:e=>A("email",e),inputClassName:k().border_style,inputContainerClassName:s()("m-t-xxs m-b-xxs",k().phone_input)}),(0,a.jsx)(b.Z,{action:"unified_auth",recaptchaRef:l,className:"row flex-c full-width",setEnableRecaptcha:B,showFallbackRecaptcha:_,onChange:()=>{j({type:"button_click",action:"verify_captcha",text:"",url:"",section:"login_email"})}}),(0,a.jsx)(f,{}),(0,a.jsx)("button",{type:"button",className:k().submitFormBtn,onClick:()=>{O("cta_click","click","Continue","login_email"),V(M?"password":"email")},disabled:!T||M&&!E.password||!M&&!E.email,children:(0,a.jsx)("span",{children:" Continue "})}),(0,a.jsxs)(x.Z,{onClick:()=>{j({type:"button_click",action:"click",text:"Proceed with Phone Number",url:"",section:"login_email"}),n("mobile")},className:s()(k().toggleLoginMode,"p-v-xxs text-c full-width"),children:[(0,a.jsx)(C.y,{className:"m-r-5"}),"Proceed with Phone Number"]})]})})})}var j=l(97729),N=l.n(j),Z=l(45847),E=l.n(Z),F=l(3314),P=l(78597),R=l(99154),M=l(14917),S=l(6156),T=l(76417),B=l(53410),I=l(85441);let L=r()(()=>l.e(5583).then(l.bind(l,5583)),{loadableGenerated:{webpack:()=>[5583]}});function A(e){let{customClassname:t}=e,{setModeStates:l,modeStates:n,route:c,registeredMobile:r}=(0,o.useContext)(i.N),{sendClickEvent:h}=(0,o.useContext)(u.fC),{updateWhatsAppConsent:x}=(0,v.Z)(),{mobile:_}=(0,F.Z)(),C=(0,o.useRef)(null),[f,y]=(0,o.useState)(""),[j,Z]=(0,o.useState)(""),[A,O]=(0,o.useState)(!1),[V,z]=(0,o.useState)("+91"),[G,J]=(0,o.useState)(!1),{otpRetryViaMobile:H,OptVerifyViaMobile:Y,createUserViaMobile:U}=(0,g.Z)(),q=(0,o.useCallback)(e=>{var t,l;(null===(t=e.target)||void 0===t?void 0:t.value)?y(null===(l=e.target)||void 0===l?void 0:l.value):y("")},[]),D=(0,o.useCallback)(()=>{h({type:"cta_click",action:"click",text:"Google Auth Login",url:"",section:"login_mobile"})},[h]),K=(0,o.useRef)();(0,o.useLayoutEffect)(()=>{try{window.google.accounts.id.renderButton(K.current,{theme:"filled_blue",size:"large",click_listener:D})}catch(e){}},[D]);let Q=(0,o.useCallback)(async()=>{var e,t;try{let t=A?null===(e=C.current)||void 0===e?void 0:e.getValue():C.current,a="".concat(V,"-").concat(f);h({type:"cta_click",action:"click",text:"Continue",url:"",section:"login_mobile"}),t&&((0,m.xH)(a)?(await U(a,t,A),l("otp")):Z(p.A8))}catch(l){let e=null==l?void 0:null===(t=l.response)||void 0===t?void 0:t.status;if(403===e){let{signature:e}=null==l?void 0:l.responseJson;window.location.href="".concat(window.location.origin,"/users/session-management/?signature=").concat(e)}if(422===e)O(!0),C.current=null;else{let t=d.N8[e];Z(t||d.I)}A&&J(!1)}},[V,U,f,h,l,A]),W=(0,o.useCallback)(async(e,t)=>{try{x(),t&&t(!0);let l=f?"".concat(V,"-").concat(f):r,a=await Y(l,e);a.success?(await (0,M.Y8)(a.data.authentication_token),window.location.href=c||window.location.href,h({type:"button_click",action:"verify_captcha",text:"",section:"signup_mobile_detail",url:""})):Z(a.message||d.I)}catch(a){var l;let e=null==a?void 0:null===(l=a.response)||void 0===l?void 0:l.status,t=d.CY[e];Z(t||d.I)}return t&&t(!1),null},[x,f,V,r,Y,c,h]),X=(0,o.useCallback)(async(e,t,l,a)=>{var i,n,s,o;try{let n=null==a?void 0:null===(i=a.current)||void 0===i?void 0:i.getValue();if(n){let a=f?"".concat(V,"-").concat(f):r;await H("mobile",a,n,"voice"===e),l(!1),t(!0)}}catch(l){let e=(null==l?void 0:null===(n=l.response)||void 0===n?void 0:n.message)||(null==l?void 0:null===(s=l.response)||void 0===s?void 0:s.status),t=d.L4[e];Z(t||d.I),null===(o=a.current)||void 0===o||o.reset()}return null},[f,V,r,H]),$=(0,o.useCallback)(async e=>{try{let t=e.current.getValue();h({type:"cta_click",action:"click",text:"Continue",url:"",section:"login_mobile"}),t&&((0,m.xH)(r)?(await U(r,t,!0),l("otp")):Z(p.A8))}catch(n){var t,a;let l=null==n?void 0:null===(t=n.response)||void 0===t?void 0:t.status,i=d.N8[l];Z(i||d.I),null===(a=e.current)||void 0===a||a.reset()}},[U,r,h,l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E(),{src:"https://accounts.google.com/gsi/client",strategy:"lazyOnload"}),(0,a.jsx)(E(),{src:"https://www.google.com/recaptcha/api.js?render=explicit"}),(0,a.jsxs)(N(),{children:[(0,a.jsx)("link",{rel:"preconnect",href:"https://www.google.com"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://www.gstatic.com",crossOrigin:"anonymous"})]},"recaptcha"),"otp"===n?(0,a.jsx)(T.Z,{mobile:f?"".concat(V,"-").concat(f):r,mode:"login",resendOtp:X,handleOTPverify:W,errorMsg:j,setErrorMsg:Z,submitBtnClass:k().submitFormBtn,editFunc:()=>{J(!1),l("mobile")}}):"otherAccLoginRecaptcha"===n?(0,a.jsx)(B.Z,{handleRecaptchaChange:e=>$(e)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{inputContainerClassName:s()(k().phone_input,"m-t-xxs m-b-s"),value:f,onClick:()=>Z(""),onChange:q,label:"Mobile Number",placeholderText:"Mobile Number",className:k().phone_input_field,childType:"dropbox",inputClassName:k().border_style,errorMsg:j,isAutoFocus:!_,children:(0,a.jsx)(S.Z,{containerClassName:k().country_code_container,inputCodeClassName:k().country_code_input,setCountryCode:z})}),(0,a.jsx)(b.Z,{action:"login_and_signup",recaptchaRef:C,className:"row flex-c full-width",setEnableRecaptcha:J,showFallbackRecaptcha:A,onChange:()=>{h({type:"button_click",action:"verify_captcha",text:"",url:"",section:"login_mobile"})}}),(0,a.jsx)(L,{}),(0,a.jsx)("div",{className:s()(k().button_wrapper,t),children:(0,a.jsx)("button",{type:"button",className:k().submitFormBtn,onClick:Q,disabled:(0,P.xb)(f)||!G,children:(0,a.jsx)("span",{children:" Continue "})})}),(0,a.jsx)("div",{className:s()(k().social_media_connect,"p-v-xxs m-b-s",t),children:(0,a.jsx)("div",{id:"google_one_tap",ref:K})}),(0,a.jsxs)(R.Z,{onClick:()=>{l("email"),h({type:"button_click",action:"click",text:"Proceed with Email",url:"",section:"login_mobile"})},className:s()(k().toggleLoginMode,"p-v-xxs",t),children:[(0,a.jsx)(I.Z,{src:"/images/email.svg",alt:"Email Svg",height:17,width:30})," Proceed with Email"]}),(0,a.jsxs)("div",{className:s()(k().privacy_policy,"text-c",t),children:[p.Cz,(0,a.jsxs)("a",{className:k().highlightedMsg,href:"https://www.scaler.com/terms/",target:"_blank",onClick:()=>h({type:"text_click",action:"click",text:"Terms",url:"",section:"login_mobile"}),rel:"noreferrer",children:[" Terms "," "]}),"and",(0,a.jsx)("a",{className:k().highlightedMsg,target:"_blank",href:"https://www.scaler.com/privacy/",rel:"noreferrer",onClick:()=>h({type:"text_click",action:"click",text:"Privacy Policy",url:"",section:"login_mobile"}),children:" Privacy Policy."})]})]})]})}function O(e){let{setUserInitialEmail:t,customClassname:l}=e,{modeStates:n}=(0,o.useContext)(i.N);return(0,a.jsx)("div",{className:s()("column",k().form_container,{"full-height flex-c":"otp"===n},{[k().form_container_content]:"email"!==n}),children:"email"===n?(0,a.jsx)(y,{setUserInitialEmail:t}):(0,a.jsx)(A,{customClassname:l})})}}}]);